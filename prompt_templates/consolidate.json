{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Schema voor Document Consolidatie",
  "description": "Valideert de structuur van de consolidatie gegenereerd door het taalmodel.",
  "type": "object",
  "properties": {
    "bericht": {
      "description": "Een bericht aan de gebruiker over de status van de consolidatie.",
      "type": "string"
    },
    "hoofdvraag": {
      "description": "De hoofdvraag waarop de consolidatie betrekking heeft.",
      "type": "string"
    },
    "consolidatie": {
      "description": "De consolidatie van informatie over de hoofdvraag. Moet minstens één item bevatten.",
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "object",
        "properties": {
          "vraag": {
            "description": "De volledige tekst van de hoofdvraag.",
            "type": "string"
          },
          "publieke_informatie": {
            "description": "Publieke informatie gerelateerd aan de vraag.",
            "type": "object",
            "properties": {
              "fragmenten": {
                "description": "Fragmenten van publieke informatie.",
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "tekst_fragment": {
                      "description": "Een stukje informatie bestemd voor de burger.",
                      "type": "string"
                    },
                    "bron_km": {
                      "description": "KME-nummer(s) die de bron zijn.",
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    }
                  },
                  "required": [
                    "tekst_fragment",
                    "bron_km"
                  ]
                }
              }
            },
            "required": [
              "fragmenten"
            ]
          },
          "interne_informatie": {
            "description": "Interne instructies gerelateerd aan de vraag.",
            "type": "object",
            "properties": {
              "fragmenten": {
                "description": "Fragmenten van interne instructies.",
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "tekst_fragment": {
                      "description": "Een instructie voor de medewerker.",
                      "type": "string"
                    },
                    "bron_km": {
                      "description": "KME-nummer(s) die de bron zijn.",
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    }
                  },
                  "required": [
                    "tekst_fragment",
                    "bron_km"
                  ]
                }
              }
            },
            "required": [
              "fragmenten"
            ]
          }
        },
        "required": [
          "vraag",
          "publieke_informatie",
          "interne_informatie"
        ]
      }
    },
    "subvragen_consolidatie": {
      "description": "De consolidatie van informatie over subvragen. Kan leeg zijn als er geen subvragen zijn geïdentificeerd ([]).",
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "vraag": {
            "description": "De volledige tekst van de subvraag.",
            "type": "string"
          },
          "publieke_informatie": {
            "description": "Publieke informatie gerelateerd aan de subvraag.",
            "type": "object",
            "properties": {
              "fragmenten": {
                "description": "Fragmenten van publieke informatie.",
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "tekst_fragment": {
                      "description": "Een stukje informatie bestemd voor de burger.",
                      "type": "string"
                    },
                    "bron_km": {
                      "description": "KME-nummer(s) die de bron zijn.",
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    }
                  },
                  "required": [
                    "tekst_fragment",
                    "bron_km"
                  ]
                }
              }
            },
            "required": [
              "fragmenten"
            ]
          },
          "interne_informatie": {
            "description": "Interne instructies gerelateerd aan de subvraag.",
            "type": "object",
            "properties": {
              "fragmenten": {
                "description": "Fragmenten van interne instructies.",
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "tekst_fragment": {
                      "description": "Een instructie voor de medewerker.",
                      "type": "string"
                    },
                    "bron_km": {
                      "description": "KME-nummer(s) die de bron zijn.",
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    }
                  },
                  "required": [
                    "tekst_fragment",
                    "bron_km"
                  ]
                }
              }
            },
            "required": [
              "fragmenten"
            ]
          }
        },
        "required": [
          "vraag",
          "publieke_informatie",
          "interne_informatie"
        ]
      }
    },
    "gedetecteerde_conflicten": {
      "description": "Conflicten die zijn gedetecteerd tijdens de consolidatie. Kan leeg zijn als er geen conflicten zijn geïdentificeerd ([]).",
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "conflict_beschrijving": {
            "description": "Een duidelijke beschrijving van de tegenstrijdigheid.",
            "type": "string"
          },
          "bron_km": {
            "description": "KME-nummer(s) die het conflict veroorzaken.",
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        },
        "required": [
          "conflict_beschrijving",
          "bron_km"
        ]
      }
    },
    "informatie_hiaten": {
      "description": "Informatiehiaten die zijn geïdentificeerd tijdens de consolidatie. Kan leeg zijn als er geen hiaten zijn geïdentificeerd ([]).",
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "hiaat_beschrijving": {
            "description": "Een duidelijke beschrijving van welke cruciale informatie ontbreekt.",
            "type": "string"
          },
          "relevante_vraag": {
            "description": "De hoofdvraag of subvraag waarop dit hiaat betrekking heeft.",
            "type": "string"
          }
        },
        "required": [
          "hiaat_beschrijving",
          "relevante_vraag"
        ]
      }
    }
  },
  "required": [
    "bericht",
    "hoofdvraag",
    "consolidatie",
    "subvragen_consolidatie",
    "gedetecteerde_conflicten",
    "informatie_hiaten"
  ]
}