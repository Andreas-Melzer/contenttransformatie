<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project: {{ project.vraag }}</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <link rel="icon" href="https://www.belastingdienst.nl/bld-assets/bld/rhslogos/bld_logo.svg" type="image/svg+xml">
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>
</head>
<body class="project-layout">

    <aside class="sidebar">
        <div class="sidebar-header">
            <h3>ü§ñ Research Agent</h3>
            <a href="/" class="back-link">&larr; Back to Dashboard</a>
        </div>
        
        <div id="chat-messages" class="chat-messages">
            {% include 'partials/chat_messages.html' %}
        </div>
        
        <form class="chat-form"
              hx-post="/project/{{ project.id }}/chat"
              hx-target="body"
              hx-swap="outerHTML"
              hx-indicator="#chat-indicator">
            <input type="text" name="prompt" class="form-control" placeholder="Ask your question...">
            <button type="submit" class="btn">Send <span id="chat-indicator" class="htmx-indicator">‚è≥</span></button>
        </form>
        
        <div class="scratchpad">
            <h4>Agent's Scratchpad</h4>
            <div class="scratchpad-content">
                {% if project.scratchpad %}
                    <ul>
                        {% for task in project.scratchpad %}
                            <li>
                                {% if task.completed %}
                                    <span class="completed">‚úÖ <s>{{ task.task }}</s></span>
                                {% else %}
                                    <span>‚òê {{ task.task }}</span>
                                {% endif %}
                            </li>
                        {% endfor %}
                    </ul>
                {% else %}
                    <p class="empty-state">The scratchpad is empty.</p>
                {% endif %}
            </div>
        </div>
    </aside>

    <main class="main-content">
        <header>
            <h1>Project: "{{ project.vraag }}"</h1>
            <h2>Step 1: Search and Select Documents</h2>
        </header>
        
        <div id="document-list">
            {% include 'partials/document_list.html' %}
        </div>
    </main>

</body>
</html>