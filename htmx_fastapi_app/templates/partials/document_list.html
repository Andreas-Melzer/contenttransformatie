{% if project.shortlist %}
    <div class="document-container">
        {% for doc_id, details in project.shortlist.items() %}
            {% set doc = doc_store.search("km_number:" + doc_id)[0] %}
            <div class="document-card">
                <div class="doc-header">
                    <span class="doc-id"><strong>{{ doc.metadata.get('km_number', 'N/A') }}</strong></span>
                    <span class="doc-relevance">
                        {% if details.relevance %}
                            Relevance: <strong>{{ details.relevance }}</strong>
                        {% else %}
                            Relevance: ...
                        {% endif %}
                    </span>
                </div>
                <div class="doc-body">
                    <p><strong>Question:</strong> {{ doc.metadata.get('VRAAG', 'N/A')[:200] }}...</p>
                </div>
                <details class="doc-expander">
                    <summary>View Full Answer</summary>
                    <div class="doc-full-content">
                        <h4>Full Question</h4>
                        <p>{{ doc.metadata.get('VRAAG', 'N/A') }}</p>
                        <h4>Answer</h4>
                        <pre>{{ doc.content }}</pre>
                    </div>
                </details>
            </div>
        {% endfor %}
    </div>
{% else %}
    <p class="empty-state">The agent has not found any documents yet. Ask a question in the chat to begin.</p>
{% endif %}